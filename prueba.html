<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <script>
        // node class is the basic structure
        // of each node present in the Huffman - tree.
        class NodoHuffman {
            constructor() {
                this.frecuencia = 0;
                this.caracter = '';
                this.izquierda = this.derecha = null;
            }
        }

        // recursive function to print the
        // huffman-code through the tree traversal.
        // Here stringCodigo is the huffman - code generated.
        function imprimirTablaCodificacion(caracter, stringCodigo) {
            // base case; if the izquierda and derecha are null
            // then its a leaf node and we print
            // the code stringCodigo generated by traversing the tree.
            if (caracter.izquierda == null &&
                caracter.derecha == null &&
                (caracter.caracter).toLowerCase() != (caracter.caracter).toUpperCase()) {

                // caracter is the character in the node
                document.write(caracter.caracter + ":" + stringCodigo + "<br>");

                return;
            }

            // if we go to izquierda then add "0" to the code.
            // if we go to the derecha add"1" to the code.

            // recursive calls for izquierda and
            // derecha sub-tree of the generated tree.
            imprimirTablaCodificacion(caracter.izquierda, stringCodigo + "0");
            imprimirTablaCodificacion(caracter.derecha, stringCodigo + "1");
        }

        // main function  
        // number of characters.
        let n = 7;
        let charArray = ['j', 'a', 'i', 'l', 'n', 't', 'v'];
        let charfreq = [3, 6, 2, 2, 2, 2, 1];

        // creating a priority queue colaPrioridad.
        // makes a min-priority queue(min-heap).
        let colaPrioridad = [];

        for (let i = 0; i < n; i++) {

            // creating a Huffman node object
            // and add it to the priority queue.
            let hn = new NodoHuffman();

            hn.caracter = charArray[i];
            hn.frecuencia = charfreq[i];

            hn.izquierda = null;
            hn.derecha = null;

            // add functions adds
            // the huffman node to the queue.
            colaPrioridad.push(hn);
        }

        colaPrioridad.sort(function(a, b) {
            return a.frecuencia - b.frecuencia;
        });

        //si solo existe un elemento ya se tiene el arbol de codificacion optima
        while (colaPrioridad.length > 1) {

            //se toman los primeros dos arboles de menor frecuencia
            let nodoUno = colaPrioridad.shift();
            let nodoDos = colaPrioridad.shift();


            /* se crea el nuevo arbol, con la suma de frecuencia de los dos anteriores
            el motivo por el que el caracter es - se debe a que en este nodo 
            solamente se guardara la suma de las frecuencias */
            let nuevoArbol = new NodoHuffman();
            nuevoArbol.frecuencia = nodoUno.frecuencia + nodoDos.frecuencia;
            nuevoArbol.caracter = undefined;

            //el primer arbol extraido se asigna como un hijo a la izquierda
            nuevoArbol.izquierda = nodoUno;
            //el segundo arbol extraido se asigna como un hijo a la derecha
            nuevoArbol.derecha = nodoDos;


            //finalmente se inserta el nuevo arbol a la cola de prioridad
            colaPrioridad.push(nuevoArbol);
            //esta parte ordena los elementos de la cola de prioridad de menor a mayor
            /**
             * se usa el metodo sort del array (cola de prioridad) el cual toma como parametro una funcion de tipo comparator
             * esta funcion toma 2 argumentos, los cuales seran cada elemento de la cola de prioridad en un for loop
             */
            colaPrioridad.sort(function(a, b) {
                /**
                 * Para comparar números en lugar de strings, la función de comparación puede simplemente 
                 * restar b de a. La siguiente función ordena el array de modo ascendente:
                 */
                return a.frecuencia - b.frecuencia;
            });
        }

        // print the codes by traversing the tree
        imprimirTablaCodificacion(colaPrioridad[0], "");

        console.log(JSON.stringify(colaPrioridad));

        // This code is contributed by avanitrachhadiya2155
    </script>
</head>

<body>

</body>

</html>